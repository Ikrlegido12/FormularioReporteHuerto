<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulario de Mantenimiento - El Huertillo</title>
  <link rel="icon" type="image/jpg" href="logo_eco.webp" />
  <meta name="description" content="Formulario de mantenimiento del huerto escolar El Huertillo del IES Bahía de Algeciras." />
  <meta name="author" content="IES Bahía de Algeciras" />
  <meta name="keywords" content="huerto escolar, mantenimiento, formulario, IES Bahía de Algeciras, ecoescuelas, sostenibilidad, educación ambiental" />
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="Formulario de Mantenimiento - El Huertillo" />
  <meta property="og:description" content="Formulario de mantenimiento del huerto escolar El Huertillo del IES Bahía de Algeciras." />
  <meta property="og:image" content="logo_eco.webp" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="es_ES" />
</head>
<body>
<h1>EL HUERTILLO - FORMULARIO DE MANTENIMIENTO</h1>

<p class="advertencia">Cualquier broma quedará registrada y con posible sanción</p>
<p class="propiedad"> COMITÉ AMBIENTAL - IES BAHÍA DE ALGECIRAS</p>
<div class="form-box">
<form action="https://formspree.io/f/xovnnknl" method="POST">
  <label>
    Correo g.educaand.es:*
    <input type="email" name="email" autocomplete="off" value="usuarioIDEA@g.educaand.es" required>
  </label>

  <label>
    Fecha del mantenimiento:*
    <input type="date" name="date" required>
  </label>

  <label>
    Encargado(s) del huerto:*
    <input type="text" name="encargados" autocomplete="off" required>
  </label>

  <label>
    Tipo de mantenimiento:
    <div class="tipo-mantenimiento">
      <label><input type="checkbox" name="maintenance_type[]" value="bancales"> Bancales</label>
      <label><input type="checkbox" name="maintenance_type[]" value="jardin-botanico"> Jardin Botánico</label>
      <label><input type="checkbox" name="maintenance_type[]" value="frutales"> Frutales</label>
      <label><input type="checkbox" name="maintenance_type[]" value="bancales-verticales"> Bancales verticales</label>
      <label><input type="checkbox" name="maintenance_type[]" value="cultivos-tierra"> Cultivos en tierra</label>
      <label><input type="checkbox" name="maintenance_type[]" value="otros"> Otros</label>
    </div>
  </label>

  <label>
    Descripción del mantenimiento realizado:*
    <textarea name="mantenimiento" required></textarea>
  </label>

  <label>
    Cosas/Objetivos a realizar en el próximo mantenimiento:*
    <textarea name="objetivos" required></textarea>
  </label>

  <label>
    Otros datos de interés:
    <textarea name="datos-extra" autocomplete="off"></textarea>
  </label>
  <p class="advertencia">* obligatorio.</p>

  <button class="submit" type="submit">ENVIAR REPORTE</button>
  <a href="#" id="info-link" class="info-link">ℹ️ + info</a>
</form>
<p id="advertencia-error" class="advertencia" style="display:none;">ERROR: Cambia el correo</p>
</div>
<div class="logo-esquina-bahia">
  <a href="https://iesbahia.es/" target="_blank" loading="lazy"><img src="logo.webp" alt="Logo Huertillo" /></a>
  <a href="https://www.juntadeandalucia.es/educacion/portals/web/aldea/proyectos/ecoescuela/el-proyecto" target="_blank" loading="lazy"><img src="logo_eco.webp" alt="Logo EcoEscuelas" /></a>
</div>
<div class="logo-esquina-junta">
  <a href="https://www.juntadeandalucia.es/educacion/portales/web/educacion/" target="_blank" loading="lazy"><img src="logo_junta.webp" alt="Logo Junta de Andalucia" /></a>
</div>

<!-- Modal -->
<div id="modal-info" class="modal-info">
  <div class="modal-content">
    <button class="close-modal" id="close-modal" title="Cerrar">&times;</button>
    <p>2025 (C) I.E.S. BAHÍA DE ALGECIRAS</p>
    <div id="modal-img-container"></div>
  </div>
</div>

<style>
  .logo-esquina-bahia {
    position: fixed;
    left: 14px;
    bottom: 14px;
    z-index: 100;
    opacity: 0.85;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 1px;
  }
  .logo-esquina-bahia img {
    height: 48px;
    width: auto;
    display: block;
    filter: drop-shadow(0 2px 4px rgba(44,62,80,0.10));
  }

  .logo-esquina-junta {
    position: fixed;
    right: 14px;
    bottom: 14px;
    z-index: 100;
    opacity: 0.85;
  }
  .logo-esquina-junta img {
    height: 48px;
    width: auto;
    display: block;
    filter: drop-shadow(0 2px 4px rgba(44,62,80,0.10));
  }

  body {
    background: linear-gradient(120deg, #e0ffe0 0%, #b2f0c0 100%);
    font-family: 'Segoe UI', Arial, sans-serif;
    margin: 0;
    padding: 0;
  }

  h1 {
    text-align: center;
    color: #357a38;
    margin-top: 32px;
    margin-bottom: 8px;
    letter-spacing: 1px;
    font-size: 2rem;
  }

  .advertencia {
    color: #d32f2f;
    font-weight: bold;
    text-align: center;
    margin-bottom: 18px;
  }
  .propiedad {
    text-align: center;
    color: #03f;
    font-size: 0.95rem;
    margin-bottom: 24px;
  }

  .form-box {
    max-width: 480px;
    margin: 32px auto 0 auto;
    padding: 32px 36px 24px 36px;
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 6px 32px rgba(44, 62, 80, 0.12);
    border: 2px solid #4caf50;
  }

  form label {
    display: block;
    margin-bottom: 18px;
    color: #357a38;
    font-weight: 500;
    font-size: 1.05rem;
    letter-spacing: 0.2px;
  }

  input[type="email"],
  input[type="date"],
  input[type="text"],
  textarea {
    display: block;
    width: 100%;
    margin-top: 7px;
    padding: 9px 12px;
    border: 1.5px solid #b2dfdb;
    border-radius: 6px;
    font-size: 1rem;
    background: #f7faf7;
    transition: border-color 0.2s;
    box-sizing: border-box;
  }

  input[type="email"]:focus,
  input[type="date"]:focus,
  input[type="text"]:focus,
  textarea:focus {
    border-color: #4caf50;
    outline: none;
    background: #e8f5e9;
  }

  label textarea {
    min-height: 70px;
    resize: vertical;
  }

  .tipo-mantenimiento {
    margin-top: 7px;
    margin-bottom: 0;
    padding: 10px 12px;
    background: #f1f8e9;
    border-radius: 7px;
    border: 1px solid #c8e6c9;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .tipo-mantenimiento label {
    color: #2e7d32;
    font-weight: 400;
    font-size: 0.98rem;
    margin-bottom: 0;
    display: flex;
    align-items: center;
    gap: 7px;
  }

  .submit {
    background-color: #43a047;
    color: white;
    font-weight: bold;
    padding: 12px 0;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    width: 100%;
    font-size: 1.08rem;
    margin-top: 10px;
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.08);
    transition: background 0.2s;
  }

  .submit:hover {
    background-color: #388e3c;
  }

  #advertencia-error {
    margin-top: 18px;
    text-align: center;
    font-size: 1.08rem;
    display: none;
  }

  .info-link {
    display: block;
    text-align: right;
    margin-top: 10px;
    color: #357a38;
    font-size: 0.98rem;
    text-decoration: none;
    cursor: pointer;
    font-weight: 500;
    transition: color 0.2s;
  }
  .info-link:hover {
    color: #d32f2f;
  }

  .modal-info {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0; top: 0; width: 100vw; height: 100vh;
    background: rgba(44,62,80,0.25);
    justify-content: center;
    align-items: center;
  }
  .modal-info.active {
    display: flex;
  }
  .modal-content {
    position: relative;
    background: #fff;
    border-radius: 16px;
    padding: 32px 24px 24px 24px;
    box-shadow: 0 8px 32px rgba(44,62,80,0.18);
    max-width: 420px;
    width: 90vw;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .close-modal {
    position: absolute;
    top: 14px;
    right: 14px;
    background: #d32f2f;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 34px;
    height: 34px;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(44,62,80,0.10);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  .close-modal:hover {
    background: #b71c1c;
  }
  .modal-img {
    max-width: 100%;
    max-height: 60vh;
    border-radius: 10px;
    box-shadow: 0 2px 12px rgba(44,62,80,0.10);
    margin-top: 16px;
  }

  @media (max-width: 950px) {
  .logo-esquina-bahia,
  .logo-esquina-junta {
    display: none;
  }
}
</style>
<script>
  // Selecciona el input de fecha y le pone el valor de hoy
  document.addEventListener('DOMContentLoaded', function() {
    const inputFecha = document.querySelector('input[type="date"][name="date"]');
    if (inputFecha) {
      const hoy = new Date();
      const yyyy = hoy.getFullYear();
      const mm = String(hoy.getMonth() + 1).padStart(2, '0');
      const dd = String(hoy.getDate()).padStart(2, '0');
      inputFecha.value = `${yyyy}-${mm}-${dd}`;
    }

    // Bloquear envío si el correo es uno específico
    const form = document.querySelector('form');
    const inputCorreo = document.querySelector('input[type="email"][name="email"]');
    const correoBloqueado = "usuarioIDEA@g.educaand.es"; // Cambia este por el correo a bloquear
    const advertenciaError = document.getElementById('advertencia-error');

    form.addEventListener('submit', function(e) {
      if (inputCorreo.value.trim().toLowerCase() === correoBloqueado.toLowerCase()) {
        e.preventDefault();
        inputCorreo.focus();
        if (advertenciaError) {
          advertenciaError.style.display = 'block';
        }
      }
    });

    // Oculta el mensaje de error si el usuario cambia el correo
    inputCorreo.addEventListener('input', function() {
      if (advertenciaError) {
        advertenciaError.style.display = 'none';
      }
    });

    // Modal
    const infoLink = document.getElementById('info-link');
    const modal = document.getElementById('modal-info');
    const closeModal = document.getElementById('close-modal');
    const modalImgContainer = document.getElementById('modal-img-container');

    if (infoLink && modal && closeModal && modalImgContainer) {
      infoLink.addEventListener('click', function(e) {
        e.preventDefault();
        // Solo añade la imagen si no está ya
        if (!modalImgContainer.querySelector('img')) {
          const img = document.createElement('img');
          img.src = 'bancales.webp';
          img.alt = 'Bancales';
          img.className = 'modal-img';
          img.loading = 'lazy';
          modalImgContainer.appendChild(img);
        }
        modal.classList.add('active');
      });

      closeModal.addEventListener('click', function() {
        modal.classList.remove('active');
      });

      // Cerrar modal al hacer click fuera del contenido
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          modal.classList.remove('active');
        }
      });

      // Cerrar con Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === "Escape") {
          modal.classList.remove('active');
        }
      });
    }
  });
</script>
</body>
</html>